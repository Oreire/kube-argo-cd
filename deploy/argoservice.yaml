# This YAML file contains the configuration for deploying ArgoCD Service on a Kubernetes cluster.
apiVersion: v1
kind: Service
metadata:
  name: argocd-server
  namespace: argocd
  labels:
    app: argocd-server
    
spec:
  selector:
    app: argocd-server
  type: NodePort
  ports:
    - protocol: TCP
      port: 8080  # ✅ External service port
      targetPort: 8080  # ✅ Matches ArgoCD container port
      nodePort: 30007  # ✅ NodePort for browser access

    - protocol: TCP
      port: 8083  # ✅ Expose metrics endpoint if needed
      targetPort: 8083  # ✅ Matches ArgoCD metrics container port
      nodePort: 30008  # ✅ NodePort for metrics access (optional)

